<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Counter</title>
</head>
<body>
  
  <script>
    var devices = [
        {id: 1, group: 'microsoft', name: 'galaxy note',        sales: 87},
        {id: 2, group: 'microsoft', name: 'window 10',          sales: 129},
        {id: 3, group: 'microsoft', name: 'galaxy watch',       sales: 45},
        {id: 4, group: 'apple',     name: 'mac pro',            sales: 58},
        {id: 5, group: 'apple',     name: 'ipad',               sales: 43},
        {id: 6, group: 'apple',     name: 'iphone',             sales: 76},
        {id: 7, group: 'apple',     name: 'apple watch',        sales: 22},
        {id: 8, group: 'IBM',       name: 'IBM network server', sales: 15},
        {id: 9, group: 'IBM',       name: 'IBM firewall',       sales: 46},
    ]
    
    function _filter(list, predi) {
      var new_list = [];
      _each(list, function(val){
        if(predi(val)) new_list.push(val);
      })

      return new_list;
    }

    function _map(list, mapper) {
      var new_list = [];
      _each(list, function(val){
        new_list.push(mapper(val));
      })

      return new_list;
    }

    function _each(list, iter) {
      for(var i = 0; i < list.length; i++) {
        iter(list[i]);
      }
      return list;
    }

    var slice = Array.prototype.slice;
    function _rest(list, num) {
      return slice.call(list, num || 1);
    }

    function _reduce(list, iter, memo) {
      if(arguments.length == 2) {
        memo = list[0];
        list = _rest(list);
      }

      _each(list, function(val) {
        memo = iter(memo, val);
      });
      return memo;  
    }
    console.log(
      _map(_filter(devices, function(val){return val.sales > 80;}), function(val){return val.name})
    );

    var add = function add(a,b) {
      return a+b;
    }
    console.log(
      _reduce([1,2,3,4], add, 0));
    
    console.log(
      _reduce([1,2,3,4,5],add));
  </script>
</body>
</html>