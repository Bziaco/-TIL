<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Counter</title>
</head>
<body>
  
  <script>
    var devices = [
        {id: 1, group: 'microsoft', name: 'galaxy note',        sales: 87},
        {id: 2, group: 'microsoft', name: 'window 10',          sales: 129},
        {id: 3, group: 'microsoft', name: 'galaxy watch',       sales: 45},
        {id: 4, group: 'apple',     name: 'mac pro',            sales: 58},
        {id: 5, group: 'apple',     name: 'ipad',               sales: 43},
        {id: 6, group: 'apple',     name: 'iphone',             sales: 76},
        {id: 7, group: 'apple',     name: 'apple watch',        sales: 22},
        {id: 8, group: 'IBM',       name: 'IBM network server', sales: 15},
        {id: 9, group: 'IBM',       name: 'IBM firewall',       sales: 46},
    ]
    //명령형 
    //그룹이 microsoft인 devie
    var array = [];
    for (var i = 0; i < devices.length; i++ ) {
        if(devices[i].group == 'microsoft') {
            array.push(devices[i]);
        }
    }
    console.log(array);
    //그룹이 microsoft인 devices의 판매량
    var device_name = [];
    for (var i = 0; i < array.length; i++ ) {
      device_name.push(array[i].sales);
    }
    
    array = [];
    console.log(device_name);
    //그룹이 apple인 devices
    
    for (var i = 0; i < devices.length; i++ ) {
        if(devices[i].group == 'apple') {
            array.push(devices[i]);
        }
    }
    console.log(array);

    //그룹이 apple인 devices의 이름
    var device_name = [];
    for (var i = 0; i < array.length; i++ ) {
      device_name.push(array[i].name);
    }
    console.log(device_name);

    //함수형 리펙토링
    //filter
    function filter(list, predi) {
      var new_list = [];
      for (var i = 0; i < devices.length; i++ ) {
        if(predi(devices[i])) {
          new_list.push(devices[i]);
        }
      }
      return new_list;
    }
    console.log(
      filter(devices, function(device) {return device.group == 'microsoft';})
    )
    console.log(
      filter(devices, function(device) {return device.group == 'apple';})
    )
    
    //map
    function map(list, mapper) {
      var new_list = [];
      for (var i = 0; i < list.length; i++ ) {
        new_list.push(mapper(list[i]));
      }
      return new_list;
    }

    var microsoft_device = filter(devices, function(device){return device.group == 'microsoft';})
    var apple_device = filter(devices, function(device) {return device.group == 'apple';})
    console.log(
      map(microsoft_device, function(device) {return device.name;})
    )

    console.log(
      map(apple_device, function(device) {return device.name;})
    )
  </script>
</body>
</html>